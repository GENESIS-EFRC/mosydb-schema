 version: 2
 jobs:
   build:
     docker:
       - image: cimg/base:2020.01
     steps:
       - checkout
       - run:
           name: install conda and regolith and run validation
           command: |
             wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
             chmod +x miniconda.sh
             bash miniconda.sh -b -p ~/miniconda
             source ~/miniconda/etc/profile.d/conda.sh
             conda activate base
             conda update conda
             conda config --set always_yes yes --set quiet true
             conda create -n validation --file requirements/validate.txt --file requirements/test.txt python=3.9
             conda activate validation
             coverage run -m pytest test --showlocals
             coverage report -m
